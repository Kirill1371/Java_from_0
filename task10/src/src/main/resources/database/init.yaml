databaseChangeLog:
  - changeSet:
      id: 1
      author: kirill
      changes:
        - createTable:
            tableName: Product
            schemaName: public
            columns:
              - column:
                  name: maker
                  type: VARCHAR(50)
              - column:
                  name: model
                  type: VARCHAR(50)
                  constraints:
                    unique: true
              - column:
                  name: type
                  type: VARCHAR(10)

  - changeSet:
      id: 2
      author: kirill
      changes:
        - createTable:
            tableName: pc
            columns:
              - column:
                  name: code
                  type: SERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: model
                  type: VARCHAR(50)
              - column:
                  name: speed
                  type: FLOAT
              - column:
                  name: ram
                  type: INTEGER
              - column:
                  name: hd
                  type: INTEGER
              - column:
                  name: cd
                  type: VARCHAR(10)
              - column:
                  name: price
                  type: INTEGER

        - createTable:
            tableName: laptop
            columns:
              - column:
                  name: code
                  type: SERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: model
                  type: VARCHAR(50)
              - column:
                  name: speed
                  type: FLOAT
              - column:
                  name: ram
                  type: INTEGER
              - column:
                  name: hd
                  type: INTEGER
              - column:
                  name: screen
                  type: FLOAT
              - column:
                  name: price
                  type: INTEGER

        - createTable:
            tableName: printer
            columns:
              - column:
                  name: code
                  type: SERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: model
                  type: VARCHAR(50)
              - column:
                  name: color
                  type: CHAR(1)
                  constraints:
                    check: color IN ('Y', 'N')
              - column:
                  name: type
                  type: VARCHAR(10)
              - column:
                  name: price
                  type: INTEGER

  - changeSet:
      id: 3
      author: kirill
      changes:
        - addForeignKeyConstraint:
            baseTableName: pc
            baseColumnNames: model
            constraintName: fk_pc_product
            referencedTableName: Product
            referencedTableSchemaName: public
            referencedColumnNames: model

        - addForeignKeyConstraint:
            baseTableName: Laptop
            baseColumnNames: model
            constraintName: fk_laptop_product
            referencedTableName: Product
            referencedTableSchemaName: public
            referencedColumnNames: model

        - addForeignKeyConstraint:
            baseTableName: Printer
            baseColumnNames: model
            constraintName: fk_printer_product
            referencedTableName: Product
            referencedTableSchemaName: public
            referencedColumnNames: model

  - changeSet:
      id: 4
      author: kirill
      changes:
        - sqlFile:
            path: src/main/resources/database/sql/Dml.sql
